(()=>{"use strict";var e={d:(t,n)=>{for(var o in n)e.o(n,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{M:()=>H});var t=".popup__button-save",n="popup__button-save_disabled",o="popup__input_error",r="popup__span-error_active",a="element__like-button_active",c=document.querySelectorAll(".popup__input"),i=document.querySelectorAll(".popup__form"),u=document.querySelectorAll(t);function l(e){var n=e.target.querySelector(t);n.textContent="Сохранение...",n.disabled=!0}function d(e){var n=e.target.querySelector(t);n.textContent="Сохранить",n.disabled=!1}function s(e){e.classList.remove(o),e.nextElementSibling.classList.remove(r)}var p={baseUrl:"https://nomoreparties.co/v1/wbc-cohort-1",headers:{authorization:"f69a8e1a-7b4c-4898-9f33-97539dca3c0c","Content-Type":"application/json"}};function m(){return fetch("".concat(p.baseUrl,"/cards"),{headers:p.headers})}function f(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}function h(e){console.log(e)}function y(e){console.log(e)}var _=document.querySelector(".popup__edit-profile"),v=document.querySelector(".popup__add-card"),S=document.querySelector(".popup__view-image"),g=document.querySelector(".profile__title"),b=document.querySelector(".profile__subtitle"),q=document.querySelector(".profile__edit-button"),k=document.querySelector(".profile__add-button"),E=document.querySelector('input[name="fullname"]'),L=document.querySelector('input[name="profession"]'),C=document.querySelector('input[name="image-name"]'),x=document.querySelector('input[name="image-link"]'),N=document.querySelector('form[name="edit-form"]'),O=document.querySelector('form[name="add-form"]'),U=document.querySelector(".popup__update-avatar"),w=document.querySelector(".profile__avatar-image"),P=document.querySelector('form[name="update-avatar-form"]'),T=document.querySelector('input[name="avatar-link"]');function j(e){M.prepend(I(e))}function J(e){u.forEach((function(e){e.classList.add(n),e.disabled=!0})),function(e){var t=e.querySelector(".popup__button-close");e.addEventListener("mousedown",(function(n){n.target===t&&A(e),n.target===e&&A(e)})),document.addEventListener("keydown",D)}(e),e.classList.add("popup_opened")}function A(e){e.classList.remove("popup_opened"),document.removeEventListener("keydown",D),i.forEach((function(e){e.reset()})),c.forEach((function(e){s(e)}))}function D(e){"Escape"===e.code&&A(document.querySelector(".popup_opened"))}w.addEventListener("click",(function(){J(U)})),q.addEventListener("click",(function(){J(_),E.value=g.textContent,L.value=b.textContent})),k.addEventListener("click",(function(){J(v)}));var H,z=document.querySelector("#card").content,M=document.querySelector(".elements"),V=z.querySelector(".element"),B=document.querySelector(".popup__image"),F=(V.querySelector(".element__image"),V.querySelector(".element__title"),document.querySelector(".popup__title"));function G(e){Object.keys(e).forEach((function(t){M.append(I(e[t]))}))}function I(e){var t=V.cloneNode(!0),n=t.querySelector(".element__image"),o=t.querySelector(".element__title"),r=t.querySelector(".element__like-button"),c=t.querySelector(".element__delete-button"),i=t.querySelector(".element__like-count");if(e.owner._id!==H&&c.remove(),0!==e.likes.length)for(var u=0;u<e.likes.length;u++)e.likes[u]._id===H&&r.classList.add(a);return t.addEventListener("click",(function(e){var t;e.target===r&&(r.classList.contains(a)?function(e){return fetch("".concat(p.baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:p.headers,body:JSON.stringify({})})}(e.target.parentNode.parentNode.parentNode.id).then(f).then((function(e){console.log(e.likes.length),r.classList.remove(a),i.textContent=e.likes.length})).catch(y):(t=e.target.parentNode.parentNode.parentNode.id,fetch("".concat(p.baseUrl,"/cards/likes/").concat(t),{method:"PUT",headers:p.headers,body:JSON.stringify({})})).then(f).then((function(e){console.log(e.likes.length),i.textContent=e.likes.length,r.classList.add(a)})).catch(y)),e.target===n&&(B.src=e.target.src,B.alt=e.target.alt,F.textContent=o.textContent,J(S)),e.target===c&&function(e){return fetch("".concat(p.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:p.headers,body:JSON.stringify({})})}(e.target.parentNode.id).then(f).then(h).then((function(){c.parentNode.remove()})).catch(y)})),n.src=e.link,n.alt=e.name,o.textContent=e.name,i.textContent=e.likes.length,t.id=e._id,t}c.forEach((function(e){e.addEventListener("input",(function(e){e.target.validity.valid||function(e){e.classList.add(o),e.nextElementSibling.classList.add(r)}(e.target),e.target.validity.valid&&s(e.target)}))})),i.forEach((function(e){e.addEventListener("input",(function(e){var o=e.target.form,r=o.checkValidity();r?(o.querySelector(t).classList.remove(n),o.querySelector(t).disabled=!r):(o.querySelector(t).classList.add(n),o.querySelector(t).disabled=!r)}))})),N.addEventListener("submit",(function(e){e.preventDefault();var t=g.textContent=E.value,n=b.textContent=L.value;l(e),function(e,t){return fetch("".concat(p.baseUrl,"/users/me"),{method:"PATCH",headers:p.headers,body:JSON.stringify({name:e,about:t})})}(t,n).then(f).then(h).catch(y).finally((function(){return d(e)})),A(_)})),O.addEventListener("submit",(function(e){e.preventDefault();var t,n={name:C.value,link:x.value,likes:[],_id:undefined,owner:{_id:H}};l(e),(t=n,fetch("".concat(p.baseUrl,"/cards"),{method:"POST",headers:p.headers,body:JSON.stringify(t)})).then(f).then(j).then(m).catch(y),m().then(f).then(G).catch(y).finally((function(){return d(e)})),A(v)})),P.addEventListener("submit",(function(e){e.preventDefault();var t,n=w.src=T.value;l(e),(t=n,fetch("".concat(p.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:p.headers,body:JSON.stringify({avatar:t})})).then(f).then(h).catch(y).finally((function(){return d(e)})),A(U)})),Promise.all([fetch("".concat(p.baseUrl,"/users/me"),{headers:p.headers}).then(f).then((function(e){g.textContent=e.name,b.textContent=e.about,w.src=e.avatar,H=e._id})),m().then(f).then(G)]).catch(y)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Y2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvd2VicGFjay9ydW50aW1lL2RlZmluZSBwcm9wZXJ0eSBnZXR0ZXJzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvd2VicGFjay9ydW50aW1lL2hhc093blByb3BlcnR5IHNob3J0aGFuZCIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvdmFsaWRhdGUuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL2FwaS5qcyIsIndlYnBhY2s6Ly9tZXN0by1wcm9qZWN0LWJvb3RjYW1wLy4vc3JjL2NvbXBvbmVudHMvdXRpbHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8tcHJvamVjdC1ib290Y2FtcC8uL3NyYy9jb21wb25lbnRzL21vZGFsLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvY29tcG9uZW50cy9jYXJkLmpzIiwid2VicGFjazovL21lc3RvLXByb2plY3QtYm9vdGNhbXAvLi9zcmMvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gVGhlIHJlcXVpcmUgc2NvcGVcbnZhciBfX3dlYnBhY2tfcmVxdWlyZV9fID0ge307XG5cbiIsIi8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb25zIGZvciBoYXJtb255IGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uZCA9IChleHBvcnRzLCBkZWZpbml0aW9uKSA9PiB7XG5cdGZvcih2YXIga2V5IGluIGRlZmluaXRpb24pIHtcblx0XHRpZihfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZGVmaW5pdGlvbiwga2V5KSAmJiAhX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIGtleSkpIHtcblx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBrZXksIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBkZWZpbml0aW9uW2tleV0gfSk7XG5cdFx0fVxuXHR9XG59OyIsIl9fd2VicGFja19yZXF1aXJlX18ubyA9IChvYmosIHByb3ApID0+IChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBwcm9wKSkiLCIndXNlIHN0cmljdCc7XHJcblxyXG5jb25zdCBzZWxlY3RvcnMgPSB7XHJcbiAgZm9ybVNlbGVjdG9yOiAnLnBvcHVwX19mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX2J1dHRvbi1zYXZlJyxcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX2J1dHRvbi1zYXZlX2Rpc2FibGVkJyxcclxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfZXJyb3InLFxyXG4gIGVycm9yQ2xhc3M6ICdwb3B1cF9fc3Bhbi1lcnJvcl9hY3RpdmUnLFxyXG4gIGFjdGl2ZUxpa2VDbGFzczogJ2VsZW1lbnRfX2xpa2UtYnV0dG9uX2FjdGl2ZScgLy9cclxufTtcclxuXHJcbmNvbnN0IGFsbElucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLmlucHV0U2VsZWN0b3IpO1xyXG5jb25zdCBhbGxGb3JtcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3JzLmZvcm1TZWxlY3Rvcik7XHJcbmNvbnN0IGFsbFNhdmVCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuZnVuY3Rpb24gd2FpdFNhdmluZyhldmVudCkge1xyXG4gIGNvbnN0IGl0ZW0gPSBldmVudC50YXJnZXQucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIGl0ZW0udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xyXG4gIGl0ZW0uZGlzYWJsZWQgPSB0cnVlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBsb2FkQ2FsbGJhY2soZXZlbnQpIHtcclxuICBjb25zdCBpdGVtID0gZXZlbnQudGFyZ2V0LnF1ZXJ5U2VsZWN0b3Ioc2VsZWN0b3JzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICBpdGVtLnRleHRDb250ZW50ID0gJ9Ch0L7RhdGA0LDQvdC40YLRjCc7XHJcbiAgaXRlbS5kaXNhYmxlZCA9IGZhbHNlO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkaXNhYmxlU2F2ZUJ1dHRvbigpIHtcclxuICBhbGxTYXZlQnV0dG9ucy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBpdGVtLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgaXRlbS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVFcnJvcihpdGVtKSB7XHJcbiAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9ycy5pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIGl0ZW0ubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5yZW1vdmUoc2VsZWN0b3JzLmVycm9yQ2xhc3MpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzaG93RXJyb3IoaXRlbSkge1xyXG4gIGl0ZW0uY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMuaW5wdXRFcnJvckNsYXNzKTtcclxuICBpdGVtLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QuYWRkKHNlbGVjdG9ycy5lcnJvckNsYXNzKTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFzSW52YWxpZCgpIHtcclxuICBhbGxJbnB1dHMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIChldnQpID0+IHtcclxuICAgICAgaWYgKCFldnQudGFyZ2V0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgc2hvd0Vycm9yKGV2dC50YXJnZXQpO1xyXG4gICAgICB9XHJcbiAgICAgIGlmIChldnQudGFyZ2V0LnZhbGlkaXR5LnZhbGlkKSB7XHJcbiAgICAgICAgaGlkZUVycm9yKGV2dC50YXJnZXQpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlU2F2ZUJ1dHRvbigpIHtcclxuICBhbGxGb3Jtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zdCB0YXJnZXRGb3JtID0gZXZ0LnRhcmdldC5mb3JtO1xyXG4gICAgICBjb25zdCBpc1ZhbGlkID0gdGFyZ2V0Rm9ybS5jaGVja1ZhbGlkaXR5KCk7XHJcbiAgICAgIGlmICghaXNWYWxpZCkge1xyXG4gICAgICAgIHRhcmdldEZvcm0ucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpLmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICAgIHRhcmdldEZvcm0ucXVlcnlTZWxlY3RvcihzZWxlY3RvcnMuc3VibWl0QnV0dG9uU2VsZWN0b3IpLmRpc2FibGVkID0gIWlzVmFsaWQ7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgdGFyZ2V0Rm9ybS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3RvcikuY2xhc3NMaXN0LnJlbW92ZShzZWxlY3RvcnMuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgICAgdGFyZ2V0Rm9ybS5xdWVyeVNlbGVjdG9yKHNlbGVjdG9ycy5zdWJtaXRCdXR0b25TZWxlY3RvcikuZGlzYWJsZWQgPSAhaXNWYWxpZDtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgaGFzSW52YWxpZCgpO1xyXG4gIHRvZ2dsZVNhdmVCdXR0b24oKTtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBzZWxlY3RvcnMsXHJcbiAgYWxsSW5wdXRzLFxyXG4gIGFsbEZvcm1zLFxyXG4gIGRpc2FibGVTYXZlQnV0dG9uLFxyXG4gIGhpZGVFcnJvcixcclxuICBlbmFibGVWYWxpZGF0aW9uLFxyXG4gIHdhaXRTYXZpbmcsXHJcbiAgbG9hZENhbGxiYWNrXHJcbn07IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuY29uc3QgY29uZmlnID0ge1xyXG4gIGJhc2VVcmw6ICdodHRwczovL25vbW9yZXBhcnRpZXMuY28vdjEvd2JjLWNvaG9ydC0xJyxcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiAnZjY5YThlMWEtN2I0Yy00ODk4LTlmMzMtOTc1MzlkY2EzYzBjJyxcclxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICB9XHJcbn07XHJcblxyXG5mdW5jdGlvbiBnZXRVc2VySW5mbygpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnNcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q2FyZHMoKSB7IC8vINC/0L7Qu9GD0YfQsNC10Lwg0LzQsNGB0YHQuNCyINC60LDRgNGC0L7Rh9C10Log0YEg0YHQtdGA0LLQtdGA0LBcclxuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnNcclxuICB9KTtcclxufVxyXG5cclxuLy8g0LzQtdC90Y/QtdC8INC00LDQvdC90YvQtSDQv9GA0L7RhNC40LvRjyDQv9GA0Lgg0YDQtdC00LDQutGC0LjRgNC+0LLQsNC90LjQuFxyXG5cclxuZnVuY3Rpb24gcGF0Y2hQcm9maWxlKG5hbWUsIGFib3V0KSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS91c2Vycy9tZWAsIHtcclxuICAgIG1ldGhvZDogJ1BBVENIJyxcclxuICAgIGhlYWRlcnM6IGNvbmZpZy5oZWFkZXJzLFxyXG4gICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICBuYW1lLFxyXG4gICAgICBhYm91dFxyXG4gICAgfSlcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcGF0Y2hBdmF0YXIobGluaykge1xyXG4gIHJldHVybiBmZXRjaChgJHtjb25maWcuYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwgeyAvLyDQvNC10L3Rj9C10Lwg0LDQstCw0YLQsNGAXHJcbiAgICBtZXRob2Q6ICdQQVRDSCcsXHJcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgYXZhdGFyOiBsaW5rXHJcbiAgICB9KVxyXG4gIH0pO1xyXG59XHJcblxyXG4vLyDQvtGC0L/RgNCw0LLQu9GP0LXQvCDQvdC+0LLRg9GOINC60LDRgNGC0L7Rh9C60YMg0L3QsCDRgdC10YDQstC10YBcclxuZnVuY3Rpb24gZ2V0TmV3Q2FyZChvYmopIHtcclxuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzYCwge1xyXG4gICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KG9iailcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHV0TGlrZShjYXJkSWQpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgIG1ldGhvZDogJ1BVVCcsXHJcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgIH0pXHJcbiAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGRlbGV0ZUxpa2UoY2FyZElkKSB7XHJcbiAgcmV0dXJuIGZldGNoKGAke2NvbmZpZy5iYXNlVXJsfS9jYXJkcy9saWtlcy8ke2NhcmRJZH1gLCB7XHJcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxyXG4gICAgaGVhZGVyczogY29uZmlnLmhlYWRlcnMsXHJcbiAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICB9KVxyXG4gIH0pO1xyXG59XHJcblxyXG4vLyDRg9C00LDQu9GP0LXQvCDQutCw0YDRgtC+0YfQutGDINC90LAg0YHQtdGA0LLQtdGA0LVcclxuZnVuY3Rpb24gZGVsZXRlQ2FyZChjYXJkSWQpIHtcclxuICByZXR1cm4gZmV0Y2goYCR7Y29uZmlnLmJhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgIG1ldGhvZDogJ0RFTEVURScsXHJcbiAgICBoZWFkZXJzOiBjb25maWcuaGVhZGVycyxcclxuICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgIH0pXHJcbiAgfSk7XHJcbn1cclxuXHJcbmV4cG9ydCB7XHJcbiAgZ2V0VXNlckluZm8sXHJcbiAgcGF0Y2hQcm9maWxlLFxyXG4gIHBhdGNoQXZhdGFyLFxyXG4gIGdldE5ld0NhcmQsXHJcbiAgZGVsZXRlQ2FyZCxcclxuICBwdXRMaWtlLFxyXG4gIGRlbGV0ZUxpa2UsXHJcbiAgZ2V0Q2FyZHMsXHJcbiAgY29uZmlnXHJcbn07IiwiJ3VzZSBzdHJpY3QnO1xyXG5cclxuZnVuY3Rpb24gY2hlY2tSZXNwb25zZShyZXMpIHtcclxuICBpZiAocmVzLm9rKSB7XHJcbiAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICB9XHJcbiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGDQntGI0LjQsdC60LA6ICR7cmVzLnN0YXR1c31gKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tSZXN1bHQocmVzdWx0KSB7XHJcbiAgY29uc29sZS5sb2cocmVzdWx0KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tFcnJvcihlcnIpIHtcclxuICBjb25zb2xlLmxvZyhlcnIpO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gIGNoZWNrRXJyb3IsXHJcbiAgY2hlY2tSZXNwb25zZSxcclxuICBjaGVja1Jlc3VsdFxyXG59OyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZWRpdC1wcm9maWxlJyk7XHJcbmNvbnN0IGNhcmRQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYWRkLWNhcmQnKTtcclxuY29uc3QgaW1hZ2VQb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdmlldy1pbWFnZScpO1xyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX190aXRsZScpO1xyXG5jb25zdCBwcm9maWxlUHJvZmVzc2lvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19zdWJ0aXRsZScpO1xyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xyXG5jb25zdCBhZGRDYXJkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2FkZC1idXR0b24nKTtcclxuY29uc3QgaW5wdXRGdWxsTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJmdWxsbmFtZVwiXScpO1xyXG5jb25zdCBpbnB1dFByb2Zlc3Npb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdpbnB1dFtuYW1lPVwicHJvZmVzc2lvblwiXScpO1xyXG5jb25zdCBhZGRJbWFnZU5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJpbWFnZS1uYW1lXCJdJyk7XHJcbmNvbnN0IGFkZEltYWdlTGlua0lucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaW5wdXRbbmFtZT1cImltYWdlLWxpbmtcIl0nKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtuYW1lPVwiZWRpdC1mb3JtXCJdJyk7XHJcbmNvbnN0IGFkZEltYWdlRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm1bbmFtZT1cImFkZC1mb3JtXCJdJyk7XHJcbmNvbnN0IHVwZGF0ZUF2YXRhclBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX191cGRhdGUtYXZhdGFyJyk7XHJcbmNvbnN0IGF2YXRhckltYWdlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2F2YXRhci1pbWFnZScpO1xyXG5jb25zdCB1cGRhdGVBdmF0YXJGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignZm9ybVtuYW1lPVwidXBkYXRlLWF2YXRhci1mb3JtXCJdJyk7XHJcbmNvbnN0IGF2YXRhckxpbmtJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2lucHV0W25hbWU9XCJhdmF0YXItbGlua1wiXScpO1xyXG5cclxuaW1wb3J0IHtcclxuICBhbGxGb3JtcyxcclxuICBhbGxJbnB1dHMsXHJcbiAgZGlzYWJsZVNhdmVCdXR0b24sXHJcbiAgaGlkZUVycm9yLFxyXG4gIHNlbGVjdG9ycyxcclxuICB3YWl0U2F2aW5nLFxyXG4gIGxvYWRDYWxsYmFja1xyXG59IGZyb20gJy4vdmFsaWRhdGUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICBjYXJkTGlzdCxcclxuICBpbWFnZUNhcmQsXHJcbiAgdGl0bGVDYXJkLFxyXG4gIGNyZWF0ZUNhcmQsXHJcbiAgYWRkSW5pdGlhbENhcmRzXHJcbn0gZnJvbSAnLi9jYXJkLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgcGF0Y2hQcm9maWxlLFxyXG4gIHBhdGNoQXZhdGFyLFxyXG4gIGdldE5ld0NhcmQsXHJcbiAgcHV0TGlrZSxcclxuICBnZXRDYXJkc1xyXG59IGZyb20gJy4vYXBpLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgbXlJZFxyXG59IGZyb20gJy4uL2luZGV4LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgY2hlY2tSZXNwb25zZSxcclxuICBjaGVja1Jlc3VsdCxcclxuICBjaGVja0Vycm9yLFxyXG59IGZyb20gJy4vdXRpbHMuanMnO1xyXG5cclxuZnVuY3Rpb24gcHJlcGVuZE5ld0NhcmQocmVzdWx0KSB7XHJcbiAgY2FyZExpc3QucHJlcGVuZChjcmVhdGVDYXJkKHJlc3VsdCkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBvcGVuUG9wdXAocG9wdXApIHtcclxuICBkaXNhYmxlU2F2ZUJ1dHRvbigpO1xyXG4gIHNldEV2ZW50TGlzdGVuZXJzKHBvcHVwKTtcclxuICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2xvc2VQb3B1cChwb3B1cCkge1xyXG4gIHBvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xyXG4gIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZWJCeUVzY2FwZSk7XHJcbiAgYWxsRm9ybXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgaXRlbS5yZXNldCgpO1xyXG4gIH0pO1xyXG4gIGFsbElucHV0cy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICBoaWRlRXJyb3IoaXRlbSk7XHJcbiAgfSk7XHJcbn1cclxuXHJcbmF2YXRhckltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gIG9wZW5Qb3B1cCh1cGRhdGVBdmF0YXJQb3B1cCk7XHJcbn0pO1xyXG5cclxucHJvZmlsZUVkaXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgb3BlblBvcHVwKHByb2ZpbGVQb3B1cCk7XHJcbiAgaW5wdXRGdWxsTmFtZS52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4gIGlucHV0UHJvZmVzc2lvbi52YWx1ZSA9IHByb2ZpbGVQcm9mZXNzaW9uLnRleHRDb250ZW50O1xyXG59KTtcclxuXHJcbmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgb3BlblBvcHVwKGNhcmRQb3B1cCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gc2V0RXZlbnRMaXN0ZW5lcnMocG9wdXApIHtcclxuICBjb25zdCBjbG9zZUJ1dHRvbiA9IHBvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fYnV0dG9uLWNsb3NlJyk7XHJcbiAgcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IGNsb3NlQnV0dG9uKSB7XHJcbiAgICAgIGNsb3NlUG9wdXAocG9wdXApO1xyXG4gICAgfVxyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IHBvcHVwKSB7XHJcbiAgICAgIGNsb3NlUG9wdXAocG9wdXApO1xyXG4gICAgfVxyXG4gIH0pO1xyXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBjbG9zZWJCeUVzY2FwZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNsb3NlYkJ5RXNjYXBlKGV2dCkge1xyXG4gIGlmIChldnQuY29kZSA9PT0gJ0VzY2FwZScpIHtcclxuICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpO1xyXG4gICAgY2xvc2VQb3B1cChvcGVuZWRQb3B1cCk7XHJcbiAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBzdWJtaXRGb3JtKGNhcmRJZCkge1xyXG4gIHByb2ZpbGVFZGl0Rm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnN0IG5hbWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGlucHV0RnVsbE5hbWUudmFsdWU7XHJcbiAgICBjb25zdCBhYm91dCA9IHByb2ZpbGVQcm9mZXNzaW9uLnRleHRDb250ZW50ID0gaW5wdXRQcm9mZXNzaW9uLnZhbHVlO1xyXG4gICAgd2FpdFNhdmluZyhldnQpO1xyXG4gICAgcGF0Y2hQcm9maWxlKG5hbWUsIGFib3V0KVxyXG4gICAgICAudGhlbihjaGVja1Jlc3BvbnNlKVxyXG4gICAgICAudGhlbihjaGVja1Jlc3VsdClcclxuICAgICAgLmNhdGNoKGNoZWNrRXJyb3IpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IGxvYWRDYWxsYmFjayhldnQpKTtcclxuICAgIGNsb3NlUG9wdXAocHJvZmlsZVBvcHVwKTtcclxuICB9KTtcclxuICBhZGRJbWFnZUZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBcclxuICAgIGxldCBvYmpDYXJkID0ge1xyXG4gICAgICBuYW1lOiBhZGRJbWFnZU5hbWVJbnB1dC52YWx1ZSxcclxuICAgICAgbGluazogYWRkSW1hZ2VMaW5rSW5wdXQudmFsdWUsXHJcbiAgICAgIGxpa2VzOiBbXSxcclxuICAgICAgX2lkOiBjYXJkSWQsXHJcbiAgICAgIG93bmVyOiB7XHJcbiAgICAgICAgX2lkOiBteUlkLFxyXG4gICAgICB9XHJcbiAgICB9O1xyXG4gICAgd2FpdFNhdmluZyhldnQpO1xyXG4gICAgZ2V0TmV3Q2FyZChvYmpDYXJkKVxyXG4gICAgICAudGhlbihjaGVja1Jlc3BvbnNlKVxyXG4gICAgICAudGhlbihwcmVwZW5kTmV3Q2FyZClcclxuICAgICAgLnRoZW4oZ2V0Q2FyZHMpXHJcbiAgICAgIC5jYXRjaChjaGVja0Vycm9yKTtcclxuICAgIGdldENhcmRzKClcclxuICAgICAgLnRoZW4oY2hlY2tSZXNwb25zZSlcclxuICAgICAgLnRoZW4oYWRkSW5pdGlhbENhcmRzKVxyXG4gICAgICAuY2F0Y2goY2hlY2tFcnJvcilcclxuICAgICAgLmZpbmFsbHkoKCkgPT4gbG9hZENhbGxiYWNrKGV2dCkpO1xyXG4gICAgY2xvc2VQb3B1cChjYXJkUG9wdXApO1xyXG4gIH0pO1xyXG4gIHVwZGF0ZUF2YXRhckZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xyXG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBpbnB1dCA9IGF2YXRhckltYWdlLnNyYyA9IGF2YXRhckxpbmtJbnB1dC52YWx1ZTtcclxuICAgIHdhaXRTYXZpbmcoZXZ0KTtcclxuICAgIHBhdGNoQXZhdGFyKGlucHV0KVxyXG4gICAgICAudGhlbihjaGVja1Jlc3BvbnNlKVxyXG4gICAgICAudGhlbihjaGVja1Jlc3VsdClcclxuICAgICAgLmNhdGNoKGNoZWNrRXJyb3IpXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IGxvYWRDYWxsYmFjayhldnQpKTtcclxuICAgIGNsb3NlUG9wdXAodXBkYXRlQXZhdGFyUG9wdXApO1xyXG4gIH0pO1xyXG59XHJcblxyXG5leHBvcnQge1xyXG4gIHByb2ZpbGVQb3B1cCxcclxuICBjYXJkUG9wdXAsXHJcbiAgaW1hZ2VQb3B1cCxcclxuICBwcm9maWxlTmFtZSxcclxuICBwcm9maWxlUHJvZmVzc2lvbixcclxuICBhZGRJbWFnZU5hbWVJbnB1dCxcclxuICBhZGRJbWFnZUxpbmtJbnB1dCxcclxuICBhdmF0YXJMaW5rSW5wdXQsXHJcbiAgYXZhdGFySW1hZ2UsXHJcbiAgb3BlblBvcHVwLFxyXG4gIGNsb3NlUG9wdXAsXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMsXHJcbiAgc3VibWl0Rm9ybVxyXG59OyIsIid1c2Ugc3RyaWN0JztcclxuXHJcbmltcG9ydCB7XHJcbiAgb3BlblBvcHVwLFxyXG4gIGltYWdlUG9wdXBcclxufSBmcm9tICcuL21vZGFsJztcclxuXHJcbmltcG9ydCB7XHJcbiAgZ2V0TmV3Q2FyZCxcclxuICBkZWxldGVDYXJkLFxyXG4gIHB1dExpa2UsXHJcbiAgZGVsZXRlTGlrZSxcclxuICBnZXRDYXJkc1xyXG59IGZyb20gJy4vYXBpLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgbXlJZFxyXG59IGZyb20gJy4uL2luZGV4LmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgc2VsZWN0b3JzXHJcbn0gZnJvbSAnLi92YWxpZGF0ZS5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gIGNoZWNrUmVzcG9uc2UsXHJcbiAgY2hlY2tSZXN1bHQsXHJcbiAgY2hlY2tFcnJvcixcclxufSBmcm9tICcuL3V0aWxzLmpzJztcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNjYXJkJykuY29udGVudDtcclxuY29uc3QgY2FyZExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHMnKTtcclxuY29uc3QgY2FyZCA9IGNhcmRUZW1wbGF0ZS5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudCcpO1xyXG5jb25zdCBpbWFnZVBvcHVwSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbmNvbnN0IGltYWdlQ2FyZCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2ltYWdlJyk7XHJcbmNvbnN0IHRpdGxlQ2FyZCA9IGNhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlJyk7XHJcbmNvbnN0IGltYWdlUG9wdXBUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fdGl0bGUnKTtcclxuXHJcbmZ1bmN0aW9uIGFkZEluaXRpYWxDYXJkcyhhcnIpIHtcclxuICBPYmplY3Qua2V5cyhhcnIpLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgIGNhcmRMaXN0LmFwcGVuZChjcmVhdGVDYXJkKGFycltpdGVtXSkpO1xyXG4gIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkZWxldGVCdXR0b25zKGFycikge1xyXG4gIE9iamVjdC5rZXlzKGFycikuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgY29uc3QgZWxlbSA9IGNyZWF0ZUNhcmQoYXJyW2l0ZW1dKTtcclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IGVsZW0ucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2RlbGV0ZS1idXR0b24nKTtcclxuICAgIGRlbGV0ZUJ1dHRvbi5yZW1vdmUoKTtcclxuICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQ2FyZChpdGVtKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmNsb25lTm9kZSh0cnVlKSxcclxuICAgIGltYWdlQ2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9faW1hZ2UnKSxcclxuICAgIHRpdGxlQ2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUnKSxcclxuICAgIGxpa2VCdXR0b25DYXJkRWxlbWVudCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19saWtlLWJ1dHRvbicpLFxyXG4gICAgZGVsZXRlQnV0dG9uQ2FyZEVsZW1lbnQgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fZGVsZXRlLWJ1dHRvbicpLFxyXG4gICAgbGlrZUNvdW50ID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2xpa2UtY291bnQnKTtcclxuXHJcbiAgaWYgKGl0ZW0ub3duZXIuX2lkICE9PSBteUlkKSB7XHJcbiAgICBkZWxldGVCdXR0b25DYXJkRWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcbiAgaWYgKGl0ZW0ubGlrZXMubGVuZ3RoICE9PSAwKSB7XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGl0ZW0ubGlrZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKGl0ZW0ubGlrZXNbaV0uX2lkID09PSBteUlkKSB7XHJcbiAgICAgICAgbGlrZUJ1dHRvbkNhcmRFbGVtZW50LmNsYXNzTGlzdC5hZGQoc2VsZWN0b3JzLmFjdGl2ZUxpa2VDbGFzcyk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgY2FyZEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldCA9PT0gbGlrZUJ1dHRvbkNhcmRFbGVtZW50KSB7XHJcbiAgICAgIGlmICghbGlrZUJ1dHRvbkNhcmRFbGVtZW50LmNsYXNzTGlzdC5jb250YWlucyhzZWxlY3RvcnMuYWN0aXZlTGlrZUNsYXNzKSkge1xyXG4gICAgICAgIHB1dExpa2UoZXZ0LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUucGFyZW50Tm9kZS5pZClcclxuICAgICAgICAgIC50aGVuKGNoZWNrUmVzcG9uc2UpXHJcbiAgICAgICAgICAudGhlbigocmVzdWx0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5saWtlcy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSByZXN1bHQubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBsaWtlQnV0dG9uQ2FyZEVsZW1lbnQuY2xhc3NMaXN0LmFkZChzZWxlY3RvcnMuYWN0aXZlTGlrZUNsYXNzKTtcclxuICAgICAgICAgIH0pXHJcbiAgICAgICAgICAuY2F0Y2goY2hlY2tFcnJvcik7XHJcbiAgICAgIH1cclxuICAgICAgZWxzZSB7XHJcbiAgICAgICAgZGVsZXRlTGlrZShldnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5wYXJlbnROb2RlLmlkKVxyXG4gICAgICAgICAgLnRoZW4oY2hlY2tSZXNwb25zZSlcclxuICAgICAgICAgIC50aGVuKChyZXN1bHQpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0Lmxpa2VzLmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGxpa2VCdXR0b25DYXJkRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHNlbGVjdG9ycy5hY3RpdmVMaWtlQ2xhc3MpO1xyXG4gICAgICAgICAgICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSByZXN1bHQubGlrZXMubGVuZ3RoO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICAgIC5jYXRjaChjaGVja0Vycm9yKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKGV2dC50YXJnZXQgPT09IGltYWdlQ2FyZEVsZW1lbnQpIHtcclxuICAgICAgaW1hZ2VQb3B1cEltYWdlLnNyYyA9IGV2dC50YXJnZXQuc3JjO1xyXG4gICAgICBpbWFnZVBvcHVwSW1hZ2UuYWx0ID0gZXZ0LnRhcmdldC5hbHQ7XHJcbiAgICAgIGltYWdlUG9wdXBUaXRsZS50ZXh0Q29udGVudCA9IHRpdGxlQ2FyZEVsZW1lbnQudGV4dENvbnRlbnQ7XHJcbiAgICAgIG9wZW5Qb3B1cChpbWFnZVBvcHVwKTtcclxuICAgIH1cclxuICAgIGlmIChldnQudGFyZ2V0ID09PSBkZWxldGVCdXR0b25DYXJkRWxlbWVudCkge1xyXG4gICAgICBkZWxldGVDYXJkKGV2dC50YXJnZXQucGFyZW50Tm9kZS5pZClcclxuICAgICAgICAudGhlbihjaGVja1Jlc3BvbnNlKVxyXG4gICAgICAgIC50aGVuKGNoZWNrUmVzdWx0KVxyXG4gICAgICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgICAgIGRlbGV0ZUJ1dHRvbkNhcmRFbGVtZW50LnBhcmVudE5vZGUucmVtb3ZlKCk7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuY2F0Y2goY2hlY2tFcnJvcik7XHJcbiAgICB9XHJcbiAgfSk7XHJcbiAgaW1hZ2VDYXJkRWxlbWVudC5zcmMgPSBpdGVtLmxpbms7XHJcbiAgaW1hZ2VDYXJkRWxlbWVudC5hbHQgPSBpdGVtLm5hbWU7XHJcbiAgdGl0bGVDYXJkRWxlbWVudC50ZXh0Q29udGVudCA9IGl0ZW0ubmFtZTtcclxuICBsaWtlQ291bnQudGV4dENvbnRlbnQgPSBpdGVtLmxpa2VzLmxlbmd0aDtcclxuICBjYXJkRWxlbWVudC5pZCA9IGl0ZW0uX2lkO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IHtcclxuICBjYXJkVGVtcGxhdGUsXHJcbiAgY2FyZExpc3QsXHJcbiAgY2FyZCxcclxuICBpbWFnZUNhcmQsXHJcbiAgdGl0bGVDYXJkLFxyXG4gIGFkZEluaXRpYWxDYXJkcyxcclxuICBjcmVhdGVDYXJkLFxyXG4gIGRlbGV0ZUJ1dHRvbnNcclxufTsiLCIndXNlIHN0cmljdCc7XHJcblxyXG5pbXBvcnQgXCIuL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5cclxuaW1wb3J0IHtcclxuICBhZGRJbml0aWFsQ2FyZHMsXHJcbn0gZnJvbSAnLi9jb21wb25lbnRzL2NhcmQuanMnO1xyXG5cclxuaW1wb3J0IHtcclxufSBmcm9tICcuL2NvbXBvbmVudHMvdXRpbHMuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICBzdWJtaXRGb3JtLFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVQcm9mZXNzaW9uLFxyXG4gIGFkZEltYWdlTmFtZUlucHV0LFxyXG4gIGFkZEltYWdlTGlua0lucHV0LFxyXG4gIGF2YXRhckltYWdlLFxyXG59IGZyb20gJy4vY29tcG9uZW50cy9tb2RhbC5qcyc7XHJcblxyXG5pbXBvcnQge1xyXG4gIHNlbGVjdG9ycyxcclxuICBlbmFibGVWYWxpZGF0aW9uLFxyXG4gIGhhc0ludmFsaWRcclxufSBmcm9tICcuL2NvbXBvbmVudHMvdmFsaWRhdGUuanMnO1xyXG5cclxuaW1wb3J0IHtcclxuICBnZXRVc2VySW5mbyxcclxuXHJcbiAgZ2V0SW5pdGlhbENhcmRzLFxyXG4gIHBhdGNoUHJvZmlsZSxcclxuICBnZXRDYXJkcyxcclxuICBjb25maWdcclxufSBmcm9tICcuL2NvbXBvbmVudHMvYXBpLmpzJztcclxuXHJcbmltcG9ydCB7XHJcbiAgY2hlY2tSZXNwb25zZSxcclxuICBjaGVja0Vycm9yXHJcbn0gZnJvbSAnLi9jb21wb25lbnRzL3V0aWxzLmpzJztcclxuXHJcbmxldCBteUlkO1xyXG5mdW5jdGlvbiBnZXRVc2VySW5mb1Jlc3VsdChyZXN1bHQpIHtcclxuICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IHJlc3VsdC5uYW1lO1xyXG4gIHByb2ZpbGVQcm9mZXNzaW9uLnRleHRDb250ZW50ID0gcmVzdWx0LmFib3V0O1xyXG4gIGF2YXRhckltYWdlLnNyYyA9IHJlc3VsdC5hdmF0YXI7XHJcbiAgbXlJZCA9IHJlc3VsdC5faWQ7XHJcbn1cclxuXHJcbmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbnN1Ym1pdEZvcm0oKTtcclxuXHJcblByb21pc2UuYWxsKFtnZXRVc2VySW5mbygpLnRoZW4oY2hlY2tSZXNwb25zZSkudGhlbihnZXRVc2VySW5mb1Jlc3VsdCksXHJcbmdldENhcmRzKCkudGhlbihjaGVja1Jlc3BvbnNlKS50aGVuKGFkZEluaXRpYWxDYXJkcyldKVxyXG4gIC5jYXRjaChjaGVja0Vycm9yKTtcclxuXHJcbiAgZXhwb3J0IHtcclxuICBteUlkXHJcbn07Il0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJleHBvcnRzIiwiZGVmaW5pdGlvbiIsImtleSIsIm8iLCJPYmplY3QiLCJkZWZpbmVQcm9wZXJ0eSIsImVudW1lcmFibGUiLCJnZXQiLCJvYmoiLCJwcm9wIiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwic2VsZWN0b3JzIiwiYWxsSW5wdXRzIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiYWxsRm9ybXMiLCJhbGxTYXZlQnV0dG9ucyIsIndhaXRTYXZpbmciLCJldmVudCIsIml0ZW0iLCJ0YXJnZXQiLCJxdWVyeVNlbGVjdG9yIiwidGV4dENvbnRlbnQiLCJkaXNhYmxlZCIsImxvYWRDYWxsYmFjayIsImhpZGVFcnJvciIsImNsYXNzTGlzdCIsInJlbW92ZSIsIm5leHRFbGVtZW50U2libGluZyIsImNvbmZpZyIsImJhc2VVcmwiLCJoZWFkZXJzIiwiYXV0aG9yaXphdGlvbiIsImdldENhcmRzIiwiZmV0Y2giLCJjaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImNoZWNrUmVzdWx0IiwicmVzdWx0IiwiY29uc29sZSIsImxvZyIsImNoZWNrRXJyb3IiLCJlcnIiLCJwcm9maWxlUG9wdXAiLCJjYXJkUG9wdXAiLCJpbWFnZVBvcHVwIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlUHJvZmVzc2lvbiIsInByb2ZpbGVFZGl0QnV0dG9uIiwiYWRkQ2FyZEJ1dHRvbiIsImlucHV0RnVsbE5hbWUiLCJpbnB1dFByb2Zlc3Npb24iLCJhZGRJbWFnZU5hbWVJbnB1dCIsImFkZEltYWdlTGlua0lucHV0IiwicHJvZmlsZUVkaXRGb3JtIiwiYWRkSW1hZ2VGb3JtIiwidXBkYXRlQXZhdGFyUG9wdXAiLCJhdmF0YXJJbWFnZSIsInVwZGF0ZUF2YXRhckZvcm0iLCJhdmF0YXJMaW5rSW5wdXQiLCJwcmVwZW5kTmV3Q2FyZCIsImNhcmRMaXN0IiwicHJlcGVuZCIsImNyZWF0ZUNhcmQiLCJvcGVuUG9wdXAiLCJwb3B1cCIsImZvckVhY2giLCJhZGQiLCJjbG9zZUJ1dHRvbiIsImFkZEV2ZW50TGlzdGVuZXIiLCJldnQiLCJjbG9zZVBvcHVwIiwiY2xvc2ViQnlFc2NhcGUiLCJzZXRFdmVudExpc3RlbmVycyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJyZXNldCIsImNvZGUiLCJ2YWx1ZSIsIm15SWQiLCJjYXJkVGVtcGxhdGUiLCJjb250ZW50IiwiY2FyZCIsImltYWdlUG9wdXBJbWFnZSIsImltYWdlUG9wdXBUaXRsZSIsImFkZEluaXRpYWxDYXJkcyIsImFyciIsImtleXMiLCJhcHBlbmQiLCJjYXJkRWxlbWVudCIsImNsb25lTm9kZSIsImltYWdlQ2FyZEVsZW1lbnQiLCJ0aXRsZUNhcmRFbGVtZW50IiwibGlrZUJ1dHRvbkNhcmRFbGVtZW50IiwiZGVsZXRlQnV0dG9uQ2FyZEVsZW1lbnQiLCJsaWtlQ291bnQiLCJvd25lciIsIl9pZCIsImxpa2VzIiwibGVuZ3RoIiwiaSIsImNhcmRJZCIsImNvbnRhaW5zIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJkZWxldGVMaWtlIiwicGFyZW50Tm9kZSIsImlkIiwidGhlbiIsImNhdGNoIiwic3JjIiwiYWx0IiwiZGVsZXRlQ2FyZCIsImxpbmsiLCJuYW1lIiwidmFsaWRpdHkiLCJ2YWxpZCIsInNob3dFcnJvciIsInRhcmdldEZvcm0iLCJmb3JtIiwiaXNWYWxpZCIsImNoZWNrVmFsaWRpdHkiLCJwcmV2ZW50RGVmYXVsdCIsImFib3V0IiwicGF0Y2hQcm9maWxlIiwiZmluYWxseSIsIm9iakNhcmQiLCJpbnB1dCIsImF2YXRhciIsImFsbCJdLCJzb3VyY2VSb290IjoiIn0=